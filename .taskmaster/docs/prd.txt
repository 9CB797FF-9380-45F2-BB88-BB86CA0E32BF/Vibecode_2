# AI 실시간 객체 칼로리 추정 서비스 PRD

## 프로젝트 개요
- 프로젝트명: AI 실시간 객체 칼로리 추정 서비스 (Live AI Calorie Estimator)
- 목표: 웹 브라우저의 카메라 스트림을 실시간으로 분석하여 화면에 보이는 모든 객체(음식 및 사물)의 이론적 칼로리를 추정하고, 그 결과를 AR(증강현실) 라벨로 객체 위에 오버레이하여 표시
- 핵심 특징: 100% 웹 기반, 음식뿐만 아니라 사물/생물 등 모든 객체의 칼로리 추정, 동적 부피 추정, 실시간 AR 시각화

## 핵심 사용자 플로우
1. 사용자가 서비스 웹 페이지에 접속
2. 브라우저가 카메라 접근 권한을 요청하고 사용자가 허용
3. 웹 페이지에 실시간 카메라 영상이 표시
4. 시스템이 영상 프레임을 지속적으로 분석하여 화면 내 객체들을 인식
5. 인식된 각 객체에 대해 부피를 추정
6. 인식된 각 객체의 종류(음식/사물)를 판별하고, 그에 맞는 로직으로 칼로리를 계산
7. 계산된 결과를 각 객체의 위치에 AR 라벨 형태로 오버레이
8. 사용자가 브라우저 탭을 닫으면 서비스가 종료

## 기능 요구사항

### FR-1: 웹 환경 및 카메라 제어
- WebRTC의 getUserMedia API를 사용하여 사용자의 전면 또는 후면 카메라에 접근
- 모바일과 데스크톱 웹 브라우저에서 모두 동작하는 반응형 UI 구현

### FR-2: 실시간 객체 인식
- 영상 스트림 내에 존재하는 다수의 객체를 동시에 탐지하고 각 객체의 경계 상자(Bounding Box)를 식별
- 탐지된 각 객체를 분류하여 객체의 이름(Class Name)을 특정
- 인식 대상은 음식에 국한되지 않고, 일반 사물, 동식물을 포함한 '모든 객체'를 대상

### FR-3: 부피 추정 로직
- 기준 객체 기반 추정: 신용카드, A4용지, 100원 동전, BIC 라이터 등의 기준 객체를 사전 정의하고 표준 크기 데이터를 내장
- 영상 프레임 내에서 기준 객체가 인식되면, 해당 객체의 픽셀 크기를 기반으로 '실제 mm 당 픽셀 수'를 계산
- 계산된 비율을 사용하여 화면 내 다른 객체들의 실제 부피를 추정
- 표준 1인분 기반 추정: 프레임 내에 기준 객체가 없을 경우, 인식된 객체가 '음식'일 경우 '표준 1인분'으로 양을 가정, '사물'일 경우 해당 사물 분류의 평균적인 크기를 기준으로 부피를 가정

### FR-4: 칼로리 추정 로직
- 인식된 객체가 '음식'인지 '사물'인지 판별
- 음식일 경우: 식품의약품안전처_식품영양성분DB API를 호출하여 해당 음식의 100g당 표준 영양 정보를 조회하고, 추정한 부피와 해당 음식의 평균 밀도를 사용하여 무게를 계산하여 최종 칼로리와 영양성분을 산출
- 사물 또는 생물일 경우: 사물-물질 매핑 테이블을 내장하고, 주요 물질별 g당 이론적 열량 데이터를 내장하여 이론적 칼로리를 산출

### FR-5: AR 시각화
- 인식된 모든 객체의 Bounding Box 위에 HTML/CSS 기반의 정보 라벨을 오버레이
- 라벨 표시 형식: [객체 이름], [추정 칼로리] kcal, 탄수화물: Xg, 단백질: Yg, 지방: Zg
- 사물의 경우, 영양성분은 'N/A' 또는 이론적 구성성분 비율로 표시
- AR 라벨은 객체가 화면 내에서 움직일 때 실시간으로 위치를 추적

## 비기능 요구사항
- 성능: 전체 인식-분석-표시 파이프라인은 초당 10프레임(10 FPS) 이상으로 처리
- 호환성: 최신 버전의 Chrome, Safari (iOS), Firefox 브라우저에서 정상 동작
- 개인정보보호: 서버로 이미지를 전송할 경우, 분석 목적 외에 절대 저장하지 않으며, 가급적 모든 AI 연산은 클라이언트 측에서 처리

## 기술 스택
- Frontend: HTML5, CSS3, JavaScript (ES6+)
- AI/ML: TensorFlow.js (클라이언트 측에서 실시간 추론)
- AR 구현: AR.js 또는 Three.js 또는 CSS 3D Transform
- 아키텍처: Hybrid Model (Client-side TensorFlow.js + Optional Server-side)

## 외부 의존성
- API: 식품의약품안전처 식품영양성분 DB API
- AI 모델: TensorFlow Hub의 사전 훈련된 객체 탐지 모델 (COCO 데이터셋 기반)
- 내부 DB: 기준 객체의 표준 크기 데이터, 사물-물질 매핑 테이블 및 물질별 칼로리/밀도 데이터
